{% extends "inicio_dhermes.html" %}
{% load static %}

{% block content %}
<div class="container-fluid mt-5">
    <h1 class="text-center mb-5">Perritos Disponibles para Adopción</h1>

    <!-- Formulario de filtros -->
    <form method="get" class="mb-4">
        <div class="row">
            <!-- Filtro de nivel de energía -->
            <div class="col-6 col-md mb-2">
                <label for="nivel_energia">Nivel de Energía:</label>
                <select name="nivel_energia" id="nivel_energia" class="form-control">
                    <option value="">Todos</option>
                    <option value="baja" {% if request.GET.nivel_energia == 'baja' %}selected{% endif %}>Baja</option>
                    <option value="alta" {% if request.GET.nivel_energia == 'alta' %}selected{% endif %}>Alta</option>
                </select>
            </div>

            <!-- Filtro de sexo -->
            <div class="col-6 col-md mb-2">
                <label for="sexo">Sexo:</label>
                <select name="sexo" id="sexo" class="form-control">
                    <option value="">Todos</option>
                    <option value="macho" {% if request.GET.sexo == 'macho' %}selected{% endif %}>Macho</option>
                    <option value="hembra" {% if request.GET.sexo == 'hembra' %}selected{% endif %}>Hembra</option>
                </select>
            </div>

            <!-- Filtro de adopción doble -->
            <div class="col-6 col-md mb-2">
                <label for="adopcion_doble">Adopción Doble:</label>
                <select name="adopcion_doble" id="adopcion_doble" class="form-control">
                    <option value="">Todos</option>
                    <option value="True" {% if request.GET.adopcion_doble == 'True' %}selected{% endif %}>Sí</option>
                </select>
            </div>

            <!-- Filtro de tamaño -->
            <div class="col-6 col-md mb-2">
                <label for="tamano">Tamaño:</label>
                <select name="tamano" id="tamano" class="form-control">
                    <option value="">Todos</option>
                    <option value="pequeño" {% if request.GET.tamano == 'pequeño' %}selected{% endif %}>Pequeño</option>
                    <option value="mediano" {% if request.GET.tamano == 'mediano' %}selected{% endif %}>Mediano</option>
                    <option value="grande" {% if request.GET.tamano == 'grande' %}selected{% endif %}>Grande</option>
                </select>
            </div>

            <!-- Filtro de edad -->
            <div class="col-6 col-md mb-2">
                <label for="edad">Edad:</label>
                <select name="edad" id="edad" class="form-control">
                    <option value="">Todas</option>
                    <option value="menos_1" {% if request.GET.edad == 'menos_1' %}selected{% endif %}>Menos de 1 año</option>
                    <option value="1_3" {% if request.GET.edad == '1_3' %}selected{% endif %}>1-3 años</option>
                    <option value="4_6" {% if request.GET.edad == '4_6' %}selected{% endif %}>4-6 años</option>
                    <option value="mayor_6" {% if request.GET.edad == 'mayor_6' %}selected{% endif %}>Mayor de 6 años</option>
                </select>
            </div>

            <!-- Botón para aplicar los filtros -->
            <div class="col-12 mt-2 text-center">
                <button type="submit" class="btn btn-primary w-100">Aplicar Filtros</button>
            </div>
        </div>
    </form>

    <!-- Tarjetas de perritos -->
    <div class="row">
        {% for perrito in perritos %}
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4 d-flex align-items-stretch">
                <!-- Enlace a la página de detalle del perrito -->
                <a href="{% url 'detalle_perrito' perrito.id %}" class="card-link text-decoration-none w-100">
                    <div class="card h-100 shadow-sm perrito-card">
                        {% if perrito.imagen %}
                            <img src="{{ perrito.imagen.url }}" class="card-img-top perrito-image" alt="Imagen de {{ perrito.nombre }}">
                        {% else %}
                            <img src="{% static 'perritos/placeholder.jpg' %}" class="card-img-top perrito-image" alt="Imagen no disponible">
                        {% endif %}
                        <div class="card-body p-3 d-flex flex-column">
                            <h5 class="card-title text-center text-primary mb-2">{{ perrito.nombre }}</h5>
                            <p class="card-text mb-1"><strong>Edad:</strong> {{ perrito.edad }} años</p>
                            <p class="card-text mb-1"><strong>Sexo:</strong> {{ perrito.sexo }}</p>
                            <p class="card-text mb-1"><strong>Tamaño:</strong> {{ perrito.tamano }}</p>
                            <p class="card-text mb-1"><strong>Nivel de Energía:</strong> {{ perrito.nivel_energia }}</p>
                            {% if perrito.es_adopcion_doble %}
                                <p class="card-text mb-1"><strong>Adopción Doble</strong></p>
                            {% endif %}
                            <p class="card-text mt-2"><strong>Descripción:</strong> {{ perrito.descripcion|truncatewords:12 }}</p>
                        </div>
                    </div>
                </a>
            </div>
        {% empty %}
            <div class="col-12">
                <p class="text-center">No hay perritos disponibles en este momento.</p>
            </div>
        {% endfor %}
    </div>
</div>

<!-- CSS para ajustar tamaño de imágenes, tarjetas y agregar movimiento -->
<style>
    .perrito-card {
        width: 100%;
        min-height: 100%;
        max-height: 500px;
        overflow: hidden;
        transition: transform 0.3s, box-shadow 0.3s;
    }
    .perrito-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }
    .perrito-image {
        height: 250px;
        object-fit: cover;
        width: 100%;
        transition: transform 0.3s;
    }
    .perrito-card:hover .perrito-image {
        transform: scale(1.05);
    }
    .card-body {
        padding: 1rem;
        transition: background-color 0.3s;
    }
    .perrito-card:hover .card-body {
        background-color: #f8f9fa;
    }
    .card-body .card-title,
    .card-body .card-text {
        color: black;  /* Cambia el color del texto a negro */
    }
</style>
{% endblock %}
